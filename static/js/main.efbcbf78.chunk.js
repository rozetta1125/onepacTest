(this.webpackJsonponepac=this.webpackJsonponepac||[]).push([[0],{33:function(e,t,a){},34:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),r=a.n(c),i=a(18),o=a.n(i),s=(a(33),a(34),a(11)),l=a(2),u=a(4),j=new(a(19).Dispatcher),d=a(5),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={timeout:2e3,Accept:"application/json","Content-Type":"application/json"},n=Object(d.a)(Object(d.a)({},a),t),c=function(e){return e.json().then((function(t){return e.status>=200&&e.status<300?Promise.resolve(t):e.status>=400&&e.status<500?Promise.reject(t):t}),(function(){var t=new Error(e.statusText);throw t.response=e,t}))};return fetch(e,n).then(c)};var m=function(e){return Promise.resolve().then((function(){return JSON.parse(localStorage.getItem(e))}))};var O={SEARCH_DATA:"SEARCH_DATA",LOAD_DATA:"LOAD_DATA",EDIT_DATA:"EDIT_DATA",LIKE_DATA:"LIKE_DATA",UNLIKE_DATA:"UNLIKE_DATA",REMOVE_DATA:"REMOVE_DATA",UNREMOVE_DATA:"UNREMOVE_DATA"};function h(e){return function(e){return b("".concat("https://images-api.nasa.gov/","/search?q=").concat(e,"&media_type=image"))}(e).then((function(e){j.dispatch({actionTypes:O.SEARCH_DATA,collection:e.collection})}))}function f(){return m("onepacTest").then((function(e){j.dispatch({actionTypes:O.LOAD_DATA,collection:e})}))}function g(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),a=t[0],r=t[1],i=Object(c.useState)(!1),o=Object(u.a)(i,2),s=o[0],j=o[1],d=Object(l.f)();return Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j(!0),h(a).then((function(){d.push("/data"),j(!1)}))},children:[Object(n.jsx)("input",{type:"text",value:a,onChange:function(e){r(e.target.value)}}),Object(n.jsx)("input",{type:"submit",value:"Search"}),s?Object(n.jsx)("p",{children:"Searching..."}):Object(n.jsx)(n.Fragment,{})]})}var v=function(){return Object(n.jsxs)("div",{className:"jumbotron",children:[Object(n.jsx)("h3",{children:"Search NASA API"}),Object(n.jsx)(g,{})]})},p=function(){return Object(n.jsx)("h1",{children:"Oops! Page not found."})},x=a(21),A=a(22),D=a(27),C=a(26),y=a(23),E="change",T=[],k=new(function(e){Object(D.a)(a,e);var t=Object(C.a)(a);function a(){return Object(x.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"addChangeListener",value:function(e){this.on(E,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(E,e)}},{key:"emitChange",value:function(){this.emit(E)}},{key:"updateLocalStorage",value:function(){var e=JSON.stringify(T);localStorage.setItem("onepacTest",e)}},{key:"getCollection",value:function(){return T}},{key:"getDataById",value:function(e){return T.items.find((function(t){return t.data[0].nasa_id===e})).data[0]}},{key:"getImageById",value:function(e){return T.items.find((function(t){return t.data[0].nasa_id===e})).links[0].href}}]),a}(y.EventEmitter));j.register((function(e){switch(e.actionTypes){case O.SEARCH_DATA:T=e.collection,k.updateLocalStorage(),k.emitChange();break;case O.LOAD_DATA:T=e.collection,k.emitChange();break;case O.EDIT_DATA:case O.LIKE_DATA:T.items.forEach((function(t,a){t.data[0].nasa_id===e.item.nasa_id&&(T.items[a].data[0]=e.item)})),k.updateLocalStorage(),k.emitChange();break;case O.REMOVE_DATA:console.log(e.item.nasa_id),T.items.forEach((function(t,a){t.data[0].nasa_id===e.item.nasa_id&&(console.log(T.items[a].data[0]),T.items[a].data[0]=e.item,console.log(T.items[a].data[0]))})),k.updateLocalStorage(),k.emitChange()}}));var L=k,_=a(9),S=a.n(_),N=a(24),I=a.n(N);a(46);var w=function(e){var t=Object(c.useState)(e.item.data[0]),a=Object(u.a)(t,2),r=a[0],i=a[1],o=Object(c.useRef)(!0);return Object(c.useEffect)((function(){o.current?o.current=!1:function(e){j.dispatch({actionTypes:O.LIKE_DATA,item:e})}(r)}),[r]),Object(n.jsx)("button",{className:"likeButton "+(r.like?"liked":"unliked"),onClick:function(){r.like?(console.log("unliked"),i(Object(d.a)(Object(d.a)({},r),{},{like:!1}))):(console.log("liked"),i(Object(d.a)(Object(d.a)({},r),{},{like:!0})))},children:"Like"})};var R=function(e){var t=Object(c.useState)(e.item.data[0]),a=Object(u.a)(t,2),r=a[0],i=a[1],o=Object(c.useRef)(!0);return Object(c.useEffect)((function(){o.current?o.current=!1:function(e){j.dispatch({actionTypes:O.REMOVE_DATA,item:e})}(r)}),[r]),Object(n.jsx)("button",{className:"removeButton "+(r.remove?"removed":""),onClick:function(){r.remove?(console.log("undo"),i(Object(d.a)(Object(d.a)({},r),{},{remove:!1}))):(console.log("remove"),i(Object(d.a)(Object(d.a)({},r),{},{remove:!0})))},children:r.remove?"Undo":"X"})},M=function(e){var t=e.id,a=e.image,c=e.title,r=e.item;return Object(n.jsxs)("article",{className:"GalleryItem",children:[Object(n.jsxs)(s.b,{className:"GalleryItem-wrapper",to:"/detail/".concat(t),title:c,children:[Object(n.jsx)("div",{className:"GalleryItem-imageWrapper",children:Object(n.jsx)(I.a,{height:200,once:!0,children:Object(n.jsx)("img",{src:a,alt:c,className:"GalleryItem-image"})})}),Object(n.jsx)("p",{className:"GalleryItem-title",children:c})]}),Object(n.jsx)(w,{item:r}),Object(n.jsx)(R,{item:r})]})};M.prototype={image:S.a.string.isRequired,id:S.a.string.isRequired,title:S.a.string.isRequired};var B=M,P=(a(47),a(25)),F=a.n(P);var K=function(e){var t=[],a=!1;switch(e.type){case"LIKED":t=e.collection.items.filter((function(e){return e.data[0].like&&!e.data[0].remove}));break;case"REMOVED":t=e.collection.items.filter((function(e){return e.data[0].remove}));break;default:t=e.collection.items}switch(e.filter){case"Newest":t.sort((function(e,t){return new Date(t.data[0].date_created)-new Date(e.data[0].date_created)}));break;case"Oldest":t.sort((function(e,t){return new Date(e.data[0].date_created)-new Date(t.data[0].date_created)}));break;case"A-Z":t.sort((function(e,t){return e.data[0].title.toLowerCase()<t.data[0].title.toLowerCase()?-1:e.data[0].title.toLowerCase()>t.data[0].title.toLowerCase()?1:0}));break;case"Z-A":t.sort((function(e,t){return e.data[0].title.toLowerCase()<t.data[0].title.toLowerCase()?1:e.data[0].title.toLowerCase()>t.data[0].title.toLowerCase()?-1:0}))}return 0===t.length&&(a=!0),Object(n.jsx)(n.Fragment,{children:a?Object(n.jsx)("p",{children:"There is no result"}):Object(n.jsx)(F.a,{breakpointCols:3,className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:t.map((function(e){return Object(n.jsx)(B,{id:e.data[0].nasa_id,image:e.links[0].href,title:e.data[0].title,item:e},e.data[0].nasa_id)}))})})};var V=function(){var e=Object(c.useState)(L.getCollection()),t=Object(u.a)(e,2),a=t[0],r=t[1],i=Object(c.useState)(!0),o=Object(u.a)(i,2),s=o[0],l=o[1],j=Object(c.useState)(),d=Object(u.a)(j,2),b=d[0],m=d[1],O=Object(c.useState)(),h=Object(u.a)(O,2),g=h[0],v=h[1];function p(){r(L.getCollection())}function x(e){m(e.target.value)}return Object(c.useEffect)((function(){return L.addChangeListener(p),0===L.getCollection.length&&f().then((function(){l(!1)})),function(){return L.removeChangeListener(p)}}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{children:"Data Page"}),Object(n.jsx)("button",{value:"ALL",onClick:x,children:"All Data"}),Object(n.jsx)("button",{value:"LIKED",onClick:x,children:"All Liked Data"}),Object(n.jsx)("button",{value:"REMOVED",onClick:x,children:"All Removed Data"}),Object(n.jsxs)("select",{style:{float:"right"},value:g,onChange:function(e){v(e.target.value)},children:[Object(n.jsx)("option",{value:"Sort",children:"Sort"}),Object(n.jsx)("option",{value:"Newest",children:"Newest"}),Object(n.jsx)("option",{value:"Oldest",children:"Oldest"}),Object(n.jsx)("option",{value:"A-Z",children:"A-Z"}),Object(n.jsx)("option",{value:"Z-A",children:"Z-A"})]}),s?Object(n.jsx)("div",{children:"Loading..."}):Object(n.jsx)(K,{collection:a,type:b,filter:g})]})},q=a(12);function Z(e){var t="form-group";return e.error.length>0&&(t+=" has-error"),Object(n.jsxs)("div",{className:t,children:[Object(n.jsx)("div",{className:"field",children:Object(n.jsx)("input",{id:e.id,type:"text",onChange:e.onChange,name:e.name,className:"form-control",value:e.value})}),e.error&&Object(n.jsx)("div",{className:"alert alert-danger",children:e.error})]})}Z.defaultProps={error:""};var G=Z;function U(e){var t="form-group";return e.error.length>0&&(t+=" has-error"),Object(n.jsxs)("div",{className:t,children:[Object(n.jsx)("div",{className:"field",children:Object(n.jsx)("textarea",{id:e.id,type:"text",onChange:e.onChange,name:e.name,className:"form-control",value:e.value})}),e.error&&Object(n.jsx)("div",{className:"alert alert-danger",children:e.error})]})}U.defaultProps={error:""};var H=U;var J=function(e){return Object(n.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(n.jsx)(G,{id:"title",label:"Title",onChange:e.onChange,name:"title",value:e.data.title,error:e.errors.title}),Object(n.jsx)(H,{id:"description",label:"Description",onChange:e.onChange,name:"description",value:e.data.description,error:e.errors.description}),Object(n.jsx)("input",{type:"submit",value:"Save",className:"btn btn-primary"})]})},W=(a(48),function(e){var t=Object(c.useState)({}),a=Object(u.a)(t,2),r=a[0],i=a[1],o=Object(c.useState)(L.getCollection()),s=Object(u.a)(o,2),b=s[0],m=s[1],h=Object(c.useState)({}),g=Object(u.a)(h,2),v=g[0],p=g[1],x=Object(c.useState)({}),A=Object(u.a)(x,2),D=A[0],C=A[1],y=Object(c.useState)(!0),E=Object(u.a)(y,2),T=E[0],k=E[1],_=Object(l.f)();function S(){m(L.getCollection())}function N(){_.push("/data")}return Object(c.useEffect)((function(){L.addChangeListener(S);var t=e.match.params.id;return 0===b.length?f().catch((function(){k(!1),p(L.getDataById(t)),C(L.getImageById(t))})):t&&(p(L.getDataById(t)),C(L.getImageById(t)),k(!1)),function(){return L.removeChangeListener(S)}}),[b.length,e.match.params.id]),Object(n.jsx)(n.Fragment,{children:T?Object(n.jsx)("div",{children:"Loading"}):Object(n.jsxs)("div",{className:"flex-row",children:[Object(n.jsx)("div",{className:"flex-img",children:Object(n.jsx)("div",{className:"ManageItem",children:Object(n.jsx)("div",{className:"ManageItem-imageWrapper",children:Object(n.jsx)("img",{src:D,alt:v.title,className:"ManageItem-image"})})})}),Object(n.jsxs)("div",{className:"flex-form",children:[Object(n.jsx)("br",{}),Object(n.jsx)("button",{onClick:N,children:"Back"}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("h2",{children:"Edit Data"}),Object(n.jsx)(J,{errors:r,data:v,onChange:function(e){var t=e.target;p(Object(d.a)(Object(d.a)({},v),{},Object(q.a)({},t.name,t.value)))},onSubmit:function(e){var t;e.preventDefault(),function(){var e={};return v.title||(e.title="Title is required"),v.description||(e.description="Description is required"),i(e),0===Object.keys(e).length}()&&(t=v,j.dispatch({actionTypes:O.EDIT_DATA,item:t}),N())}})]})]})})});var X=function(){return Object(n.jsx)("div",{id:"app",className:"container-fluid",children:Object(n.jsx)(s.a,{children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:"/",component:v}),Object(n.jsx)(l.a,{path:"/data",component:V}),Object(n.jsx)(l.a,{path:"/detail/:id",component:W}),Object(n.jsx)(l.a,{component:p})]})})})},z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,51)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};a(49);o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(X,{})}),document.getElementById("root")),z()}},[[50,1,2]]]);
//# sourceMappingURL=main.efbcbf78.chunk.js.map