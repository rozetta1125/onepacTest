(this.webpackJsonponepac=this.webpackJsonponepac||[]).push([[0],{33:function(e,t,n){},34:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(1),c=n.n(i),r=n(18),s=n.n(r),o=(n(33),n(34),n(11)),l=n(2),u=n(4),d=new(n(19).Dispatcher),j=n(8),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={timeout:2e3,Accept:"application/json","Content-Type":"application/json"},a=Object(j.a)(Object(j.a)({},n),t),i=function(e){return e.json().then((function(t){return e.status>=200&&e.status<300?Promise.resolve(t):e.status>=400&&e.status<500?Promise.reject(t):t}),(function(){var t=new Error(e.statusText);throw t.response=e,t}))};return fetch(e,a).then(i)};var b=function(e){return Promise.resolve().then((function(){return JSON.parse(localStorage.getItem(e))}))};var h={SEARCH_DATA:"SEARCH_DATA",LOAD_DATA:"LOAD_DATA",EDIT_DATA:"EDIT_DATA",LIKE_DATA:"LIKE_DATA",UNLIKE_DATA:"UNLIKE_DATA",REMOVE_DATA:"REMOVE_DATA",UNREMOVE_DATA:"UNREMOVE_DATA"};function f(e){return function(e){return m("".concat("https://images-api.nasa.gov/","/search?q=").concat(e,"&media_type=image"))}(e).then((function(e){d.dispatch({actionTypes:h.SEARCH_DATA,collection:e.collection})}))}function g(){return b("onepacTest").then((function(e){d.dispatch({actionTypes:h.LOAD_DATA,collection:e})}))}function O(){var e=Object(i.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(l.f)();return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),f(n).then((function(){r.push("/data")}))},children:[Object(a.jsx)("input",{type:"text",value:n,onChange:function(e){c(e.target.value)}}),Object(a.jsx)("input",{type:"submit",value:"Submit"})]})}var p=function(){return Object(a.jsxs)("div",{className:"jumbotron",children:[Object(a.jsx)("h3",{children:"Search NASA API"}),Object(a.jsx)(O,{})]})},v=function(){return Object(a.jsx)("h1",{children:"Oops! Page not found."})},x=n(21),A=n(22),y=n(27),D=n(26),C=n(23),T="change",_=[],E=new(function(e){Object(y.a)(n,e);var t=Object(D.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(A.a)(n,[{key:"addChangeListener",value:function(e){this.on(T,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(T,e)}},{key:"emitChange",value:function(){this.emit(T)}},{key:"updateLocalStorage",value:function(){var e=JSON.stringify(_);localStorage.setItem("onepacTest",e)}},{key:"getCollection",value:function(){return _}},{key:"getLikedCollection",value:function(){var e=_;return e.items=e.items.filter((function(e){if(e.data[0].like)return e.data[0].like})),e}},{key:"getDataById",value:function(e){return _.items.find((function(t){return t.data[0].nasa_id===e})).data[0]}},{key:"getImageById",value:function(e){return _.items.find((function(t){return t.data[0].nasa_id===e})).links[0].href}}]),n}(C.EventEmitter));d.register((function(e){switch(e.actionTypes){case h.SEARCH_DATA:_=e.collection,E.updateLocalStorage(),E.emitChange();break;case h.LOAD_DATA:_=e.collection,E.emitChange();break;case h.EDIT_DATA:_.items.forEach((function(t,n){t.data[0].nasa_id===e.item.nasa_id&&(_.items[n].data[0]=e.item)})),console.log(e.item),E.updateLocalStorage(),E.emitChange();break;case h.LIKE_DATA:console.log(e.item.nasa_id),_.items.forEach((function(t,n){t.data[0].nasa_id===e.item.nasa_id&&(console.log(_.items[n].data[0]),_.items[n].data[0]=e.item,console.log(_.items[n].data[0]))})),E.updateLocalStorage(),E.emitChange()}}));var I=E,N=n(9),k=n.n(N),S=n(24),L=n.n(S);n(46);var R=function(e){var t=Object(i.useState)(e.item.data[0]),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(i.useRef)(!0);return Object(i.useEffect)((function(){s.current?s.current=!1:function(e){d.dispatch({actionTypes:h.LIKE_DATA,item:e})}(c)})),Object(a.jsx)("button",{className:"likeButton "+(c.like?"liked":"unliked"),onClick:function(){c.like?(console.log("unliked"),r(Object(j.a)(Object(j.a)({},c),{},{like:!1}))):(console.log("liked"),r(Object(j.a)(Object(j.a)({},c),{},{like:!0})))},children:"Like"})},w=function(e){var t=e.id,n=e.image,i=e.title,c=e.item;return Object(a.jsxs)("article",{className:"GalleryItem",children:[Object(a.jsxs)(o.b,{className:"GalleryItem-wrapper",to:"/detail/".concat(t),title:i,children:[Object(a.jsx)("div",{className:"GalleryItem-imageWrapper",children:Object(a.jsx)(L.a,{height:200,once:!0,children:Object(a.jsx)("img",{src:n,alt:i,className:"GalleryItem-image"})})}),Object(a.jsx)("p",{className:"GalleryItem-title",children:i})]}),Object(a.jsx)(R,{item:c})]})};w.prototype={image:k.a.string.isRequired,id:k.a.string.isRequired,title:k.a.string.isRequired};var B=w,P=(n(47),n(25)),M=n.n(P);var F=function(e){return console.log(e),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(M.a,{breakpointCols:3,className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:e.collection.items.map((function(e){return Object(a.jsx)(B,{id:e.data[0].nasa_id,image:e.links[0].href,title:e.data[0].title,item:e},e.data[0].nasa_id)}))})})};var q=function(){var e=Object(i.useState)(I.getCollection()),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(i.useState)(!0),s=Object(u.a)(r,2),o=s[0],l=s[1];function d(){c(I.getCollection())}return Object(i.useEffect)((function(){return I.addChangeListener(d),0===I.getCollection.length&&g().then((function(){return l(!1)})),function(){return I.removeChangeListener(d)}}),[]),Object(a.jsx)(a.Fragment,{children:o?Object(a.jsx)("div",{children:"Loading"}):Object(a.jsx)(F,{collection:n})})},K=n(12);function G(e){var t="form-group";return e.error.length>0&&(t+=" has-error"),Object(a.jsxs)("div",{className:t,children:[Object(a.jsx)("div",{className:"field",children:Object(a.jsx)("input",{id:e.id,type:"text",onChange:e.onChange,name:e.name,className:"form-control",value:e.value})}),e.error&&Object(a.jsx)("div",{className:"alert alert-danger",children:e.error})]})}G.defaultProps={error:""};var H=G;function J(e){var t="form-group";return e.error.length>0&&(t+=" has-error"),Object(a.jsxs)("div",{className:t,children:[Object(a.jsx)("div",{className:"field",children:Object(a.jsx)("textarea",{id:e.id,type:"text",onChange:e.onChange,name:e.name,className:"form-control",value:e.value})}),e.error&&Object(a.jsx)("div",{className:"alert alert-danger",children:e.error})]})}J.defaultProps={error:""};var U=J;var V=function(e){return Object(a.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(a.jsx)(H,{id:"title",label:"Title",onChange:e.onChange,name:"title",value:e.data.title,error:e.errors.title}),Object(a.jsx)(U,{id:"description",label:"Description",onChange:e.onChange,name:"description",value:e.data.description,error:e.errors.description}),Object(a.jsx)("input",{type:"submit",value:"Save",className:"btn btn-primary"})]})},W=(n(48),function(e){var t=Object(i.useState)({}),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(i.useState)(I.getCollection()),o=Object(u.a)(s,2),l=o[0],m=o[1],b=Object(i.useState)({}),f=Object(u.a)(b,2),O=f[0],p=f[1],v=Object(i.useState)({}),x=Object(u.a)(v,2),A=x[0],y=x[1],D=Object(i.useState)(!0),C=Object(u.a)(D,2),T=C[0],_=C[1];function E(){m(I.getCollection())}return Object(i.useEffect)((function(){I.addChangeListener(E);var t=e.match.params.id;return 0===l.length?g().catch((function(){_(!1),p(I.getDataById(t)),y(I.getImageById(t))})):t&&(p(I.getDataById(t)),y(I.getImageById(t)),_(!1)),function(){return I.removeChangeListener(E)}}),[l.length,e.match.params.id]),Object(a.jsx)(a.Fragment,{children:T?Object(a.jsx)("div",{children:"Loading"}):Object(a.jsxs)("div",{className:"flex-row",children:[Object(a.jsx)("div",{className:"flex-img",children:Object(a.jsx)("div",{className:"ManageItem",children:Object(a.jsx)("div",{className:"ManageItem-imageWrapper",children:Object(a.jsx)("img",{src:A,alt:O.title,className:"ManageItem-image"})})})}),Object(a.jsxs)("div",{className:"flex-form",children:[Object(a.jsx)("h2",{children:"Edit Data"}),Object(a.jsx)(V,{errors:c,data:O,onChange:function(e){var t=e.target;p(Object(j.a)(Object(j.a)({},O),{},Object(K.a)({},t.name,t.value)))},onSubmit:function(e){var t;e.preventDefault(),function(){var e={};return O.title||(e.title="Title is required"),O.description||(e.description="Description is required"),r(e),0===Object.keys(e).length}()&&(t=O,d.dispatch({actionTypes:h.EDIT_DATA,item:t}))}})]})]})})});var z=function(){return Object(a.jsx)("div",{id:"app",className:"container-fluid",children:Object(a.jsx)(o.a,{children:Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{exact:!0,path:"/",component:p}),Object(a.jsx)(l.a,{path:"/data",component:q}),Object(a.jsx)(l.a,{path:"/detail/:id",component:W}),Object(a.jsx)(l.a,{component:v})]})})})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};n(49);s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(z,{})}),document.getElementById("root")),Q()}},[[50,1,2]]]);
//# sourceMappingURL=main.83c790a3.chunk.js.map