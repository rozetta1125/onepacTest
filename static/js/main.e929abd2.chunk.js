(this.webpackJsonponepac=this.webpackJsonponepac||[]).push([[0],{33:function(e,t,n){},34:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),i=n.n(c),r=n(18),s=n.n(r),o=(n(33),n(34),n(11)),l=n(2),u=n(4),j=new(n(19).Dispatcher),d=n(8),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={timeout:2e3,Accept:"application/json","Content-Type":"application/json"},a=Object(d.a)(Object(d.a)({},n),t),c=function(e){return e.json().then((function(t){return e.status>=200&&e.status<300?Promise.resolve(t):e.status>=400&&e.status<500?Promise.reject(t):t}),(function(){var t=new Error(e.statusText);throw t.response=e,t}))};return fetch(e,a).then(c)};var b=function(e){return Promise.resolve().then((function(){return JSON.parse(localStorage.getItem(e))}))};var h={SEARCH_DATA:"SEARCH_DATA",LOAD_DATA:"LOAD_DATA",EDIT_DATA:"EDIT_DATA",LIKE_DATA:"LIKE_DATA",UNLIKE_DATA:"UNLIKE_DATA",REMOVE_DATA:"REMOVE_DATA",UNREMOVE_DATA:"UNREMOVE_DATA"};function O(e){return function(e){return m("".concat("https://images-api.nasa.gov/","/search?q=").concat(e,"&media_type=image"))}(e).then((function(e){j.dispatch({actionTypes:h.SEARCH_DATA,collection:e.collection})}))}function f(){return b("onepacTest").then((function(e){j.dispatch({actionTypes:h.LOAD_DATA,collection:e})}))}function g(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(!1),s=Object(u.a)(r,2),o=s[0],j=s[1],d=Object(l.f)();return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j(!0),O(n).then((function(){d.push("/data"),j(!1)}))},children:[Object(a.jsx)("input",{type:"text",value:n,onChange:function(e){i(e.target.value)}}),Object(a.jsx)("input",{type:"submit",value:"Search"}),o?Object(a.jsx)("p",{children:"Searching..."}):Object(a.jsx)(a.Fragment,{})]})}var p=function(){return Object(a.jsxs)("div",{className:"jumbotron",children:[Object(a.jsx)("h3",{children:"Search NASA API"}),Object(a.jsx)(g,{})]})},v=function(){return Object(a.jsx)("h1",{children:"Oops! Page not found."})},x=n(21),A=n(22),y=n(27),D=n(26),C=n(23),T="change",k=[],S=new(function(e){Object(y.a)(n,e);var t=Object(D.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(A.a)(n,[{key:"addChangeListener",value:function(e){this.on(T,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(T,e)}},{key:"emitChange",value:function(){this.emit(T)}},{key:"updateLocalStorage",value:function(){var e=JSON.stringify(k);localStorage.setItem("onepacTest",e)}},{key:"getCollection",value:function(){return k}},{key:"getLikedCollection",value:function(){var e=k;return e.items=e.items.filter((function(e){if(e.data[0].like)return e.data[0].like})),e}},{key:"getDataById",value:function(e){return k.items.find((function(t){return t.data[0].nasa_id===e})).data[0]}},{key:"getImageById",value:function(e){return k.items.find((function(t){return t.data[0].nasa_id===e})).links[0].href}}]),n}(C.EventEmitter));j.register((function(e){switch(e.actionTypes){case h.SEARCH_DATA:k=e.collection,S.updateLocalStorage(),S.emitChange();break;case h.LOAD_DATA:k=e.collection,S.emitChange();break;case h.EDIT_DATA:k.items.forEach((function(t,n){t.data[0].nasa_id===e.item.nasa_id&&(k.items[n].data[0]=e.item)})),console.log(e.item),S.updateLocalStorage(),S.emitChange();break;case h.LIKE_DATA:console.log(e.item.nasa_id),k.items.forEach((function(t,n){t.data[0].nasa_id===e.item.nasa_id&&(console.log(k.items[n].data[0]),k.items[n].data[0]=e.item,console.log(k.items[n].data[0]))})),S.updateLocalStorage(),S.emitChange()}}));var _=S,E=n(9),I=n.n(E),N=n(24),L=n.n(N);n(46);var R=function(e){var t=Object(c.useState)(e.item.data[0]),n=Object(u.a)(t,2),i=n[0],r=n[1],s=Object(c.useRef)(!0);return Object(c.useEffect)((function(){s.current?s.current=!1:function(e){j.dispatch({actionTypes:h.LIKE_DATA,item:e})}(i)})),Object(a.jsx)("button",{className:"likeButton "+(i.like?"liked":"unliked"),onClick:function(){i.like?(console.log("unliked"),r(Object(d.a)(Object(d.a)({},i),{},{like:!1}))):(console.log("liked"),r(Object(d.a)(Object(d.a)({},i),{},{like:!0})))},children:"Like"})},B=function(e){var t=e.id,n=e.image,c=e.title,i=e.item;return Object(a.jsxs)("article",{className:"GalleryItem",children:[Object(a.jsxs)(o.b,{className:"GalleryItem-wrapper",to:"/detail/".concat(t),title:c,children:[Object(a.jsx)("div",{className:"GalleryItem-imageWrapper",children:Object(a.jsx)(L.a,{height:200,once:!0,children:Object(a.jsx)("img",{src:n,alt:c,className:"GalleryItem-image"})})}),Object(a.jsx)("p",{className:"GalleryItem-title",children:c})]}),Object(a.jsx)(R,{item:i})]})};B.prototype={image:I.a.string.isRequired,id:I.a.string.isRequired,title:I.a.string.isRequired};var w=B,P=(n(47),n(25)),F=n.n(P);var M=function(e){return console.log(e),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(F.a,{breakpointCols:3,className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:e.collection.items.map((function(e){return Object(a.jsx)(w,{id:e.data[0].nasa_id,image:e.links[0].href,title:e.data[0].title,item:e},e.data[0].nasa_id)}))})})};var q=function(){var e=Object(c.useState)(_.getCollection()),t=Object(u.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(!0),s=Object(u.a)(r,2),o=s[0],l=s[1];function j(){i(_.getCollection())}return Object(c.useEffect)((function(){return _.addChangeListener(j),0===_.getCollection.length&&f().then((function(){return l(!1)})),function(){return _.removeChangeListener(j)}}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"All Data"}),o?Object(a.jsx)("div",{children:"Loading"}):Object(a.jsx)(M,{collection:n})]})},K=n(12);function G(e){var t="form-group";return e.error.length>0&&(t+=" has-error"),Object(a.jsxs)("div",{className:t,children:[Object(a.jsx)("div",{className:"field",children:Object(a.jsx)("input",{id:e.id,type:"text",onChange:e.onChange,name:e.name,className:"form-control",value:e.value})}),e.error&&Object(a.jsx)("div",{className:"alert alert-danger",children:e.error})]})}G.defaultProps={error:""};var H=G;function J(e){var t="form-group";return e.error.length>0&&(t+=" has-error"),Object(a.jsxs)("div",{className:t,children:[Object(a.jsx)("div",{className:"field",children:Object(a.jsx)("textarea",{id:e.id,type:"text",onChange:e.onChange,name:e.name,className:"form-control",value:e.value})}),e.error&&Object(a.jsx)("div",{className:"alert alert-danger",children:e.error})]})}J.defaultProps={error:""};var U=J;var V=function(e){return Object(a.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(a.jsx)(H,{id:"title",label:"Title",onChange:e.onChange,name:"title",value:e.data.title,error:e.errors.title}),Object(a.jsx)(U,{id:"description",label:"Description",onChange:e.onChange,name:"description",value:e.data.description,error:e.errors.description}),Object(a.jsx)("input",{type:"submit",value:"Save",className:"btn btn-primary"})]})},W=(n(48),function(e){var t=Object(c.useState)({}),n=Object(u.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)(_.getCollection()),o=Object(u.a)(s,2),m=o[0],b=o[1],O=Object(c.useState)({}),g=Object(u.a)(O,2),p=g[0],v=g[1],x=Object(c.useState)({}),A=Object(u.a)(x,2),y=A[0],D=A[1],C=Object(c.useState)(!0),T=Object(u.a)(C,2),k=T[0],S=T[1],E=Object(l.f)();function I(){b(_.getCollection())}function N(){E.push("/data")}return Object(c.useEffect)((function(){_.addChangeListener(I);var t=e.match.params.id;return 0===m.length?f().catch((function(){S(!1),v(_.getDataById(t)),D(_.getImageById(t))})):t&&(v(_.getDataById(t)),D(_.getImageById(t)),S(!1)),function(){return _.removeChangeListener(I)}}),[m.length,e.match.params.id]),Object(a.jsx)(a.Fragment,{children:k?Object(a.jsx)("div",{children:"Loading"}):Object(a.jsxs)("div",{className:"flex-row",children:[Object(a.jsx)("div",{className:"flex-img",children:Object(a.jsx)("div",{className:"ManageItem",children:Object(a.jsx)("div",{className:"ManageItem-imageWrapper",children:Object(a.jsx)("img",{src:y,alt:p.title,className:"ManageItem-image"})})})}),Object(a.jsxs)("div",{className:"flex-form",children:[Object(a.jsx)("br",{}),Object(a.jsx)("button",{onClick:N,children:"Back"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("h2",{children:"Edit Data"}),Object(a.jsx)(V,{errors:i,data:p,onChange:function(e){var t=e.target;v(Object(d.a)(Object(d.a)({},p),{},Object(K.a)({},t.name,t.value)))},onSubmit:function(e){var t;e.preventDefault(),function(){var e={};return p.title||(e.title="Title is required"),p.description||(e.description="Description is required"),r(e),0===Object.keys(e).length}()&&(t=p,j.dispatch({actionTypes:h.EDIT_DATA,item:t}),N())}})]})]})})});var z=function(){return Object(a.jsx)("div",{id:"app",className:"container-fluid",children:Object(a.jsx)(o.a,{children:Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{exact:!0,path:"/",component:p}),Object(a.jsx)(l.a,{path:"/data",component:q}),Object(a.jsx)(l.a,{path:"/detail/:id",component:W}),Object(a.jsx)(l.a,{component:v})]})})})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};n(49);s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(z,{})}),document.getElementById("root")),Q()}},[[50,1,2]]]);
//# sourceMappingURL=main.e929abd2.chunk.js.map